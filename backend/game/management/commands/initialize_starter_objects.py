from django.core.management.base import BaseCommand
from game.models import GameObject
from decimal import Decimal


class Command(BaseCommand):
    help = 'Initialize starter objects for the game'

    def handle(self, *args, **kwargs):
        starter_objects = [
            # Hunter-Gatherer starters (already exist)
            {
                'object_name': 'Rock',
                'era_name': 'Hunter-Gatherer',
                'is_keystone': False,
                'category': 'natural',
                'quality_tier': 'common',
                'cost': Decimal('10'),
                'time_crystal_cost': Decimal('0'),
                'income_per_second': Decimal('0'),
                'time_crystal_generation': Decimal('0'),
                'build_time_sec': 0,
                'operation_duration_sec': 300,
                'retire_payout_coins_pct': Decimal('0.2'),
                'sellback_pct': Decimal('0.2'),
                'cap_per_civ': None,
                'footprint_w': 1,
                'footprint_h': 1,
                'size': Decimal('0.5'),
                'global_modifiers': [],
                'flavor_text': 'A simple rock. Hard and useful.',
                'image_path': '/media/objects/starter-rock.png'
            },
            {
                'object_name': 'Stick',
                'era_name': 'Hunter-Gatherer',
                'is_keystone': False,
                'category': 'natural',
                'quality_tier': 'common',
                'cost': Decimal('10'),
                'time_crystal_cost': Decimal('0'),
                'income_per_second': Decimal('0'),
                'time_crystal_generation': Decimal('0'),
                'build_time_sec': 0,
                'operation_duration_sec': 300,
                'retire_payout_coins_pct': Decimal('0.2'),
                'sellback_pct': Decimal('0.2'),
                'cap_per_civ': None,
                'footprint_w': 1,
                'footprint_h': 1,
                'size': Decimal('0.5'),
                'global_modifiers': [],
                'flavor_text': 'A sturdy stick. Nature\'s first tool.',
                'image_path': '/media/objects/starter-stick.png'
            },
            {
                'object_name': 'Water',
                'era_name': 'Hunter-Gatherer',
                'is_keystone': False,
                'category': 'natural',
                'quality_tier': 'common',
                'cost': Decimal('10'),
                'time_crystal_cost': Decimal('0'),
                'income_per_second': Decimal('0'),
                'time_crystal_generation': Decimal('0'),
                'build_time_sec': 0,
                'operation_duration_sec': 300,
                'retire_payout_coins_pct': Decimal('0.2'),
                'sellback_pct': Decimal('0.2'),
                'cap_per_civ': None,
                'footprint_w': 1,
                'footprint_h': 1,
                'size': Decimal('0.5'),
                'global_modifiers': [],
                'flavor_text': 'Pure water. Essential for life.',
                'image_path': '/media/objects/starter-water.png'
            },
            {
                'object_name': 'Dirt',
                'era_name': 'Hunter-Gatherer',
                'is_keystone': False,
                'category': 'natural',
                'quality_tier': 'common',
                'cost': Decimal('10'),
                'time_crystal_cost': Decimal('0'),
                'income_per_second': Decimal('0'),
                'time_crystal_generation': Decimal('0'),
                'build_time_sec': 0,
                'operation_duration_sec': 300,
                'retire_payout_coins_pct': Decimal('0.2'),
                'sellback_pct': Decimal('0.2'),
                'cap_per_civ': None,
                'footprint_w': 1,
                'footprint_h': 1,
                'size': Decimal('0.5'),
                'global_modifiers': [],
                'flavor_text': 'Rich earth. The foundation of all.',
                'image_path': '/media/objects/starter-dirt.png'
            },
            # Agriculture starters
            {
                'object_name': 'Seed',
                'era_name': 'Agriculture',
                'is_keystone': False,
                'category': 'natural',
                'quality_tier': 'common',
                'cost': Decimal('100'),
                'time_crystal_cost': Decimal('0'),
                'income_per_second': Decimal('0'),
                'time_crystal_generation': Decimal('0'),
                'build_time_sec': 0,
                'operation_duration_sec': 300,
                'retire_payout_coins_pct': Decimal('0.2'),
                'sellback_pct': Decimal('0.2'),
                'cap_per_civ': None,
                'footprint_w': 1,
                'footprint_h': 1,
                'size': Decimal('0.3'),
                'global_modifiers': [],
                'flavor_text': 'A tiny seed with potential for growth.',
                'image_path': '/media/objects/starter-seed.png'
            },
            {
                'object_name': 'Clay',
                'era_name': 'Agriculture',
                'is_keystone': False,
                'category': 'natural',
                'quality_tier': 'common',
                'cost': Decimal('100'),
                'time_crystal_cost': Decimal('0'),
                'income_per_second': Decimal('0'),
                'time_crystal_generation': Decimal('0'),
                'build_time_sec': 0,
                'operation_duration_sec': 300,
                'retire_payout_coins_pct': Decimal('0.2'),
                'sellback_pct': Decimal('0.2'),
                'cap_per_civ': None,
                'footprint_w': 1,
                'footprint_h': 1,
                'size': Decimal('0.5'),
                'global_modifiers': [],
                'flavor_text': 'Moldable earth, foundation of pottery.',
                'image_path': '/media/objects/starter-clay.png'
            },
            # Metallurgy starters
            {
                'object_name': 'Ore',
                'era_name': 'Metallurgy',
                'is_keystone': False,
                'category': 'natural',
                'quality_tier': 'common',
                'cost': Decimal('1000'),
                'time_crystal_cost': Decimal('0'),
                'income_per_second': Decimal('0'),
                'time_crystal_generation': Decimal('0'),
                'build_time_sec': 0,
                'operation_duration_sec': 300,
                'retire_payout_coins_pct': Decimal('0.2'),
                'sellback_pct': Decimal('0.2'),
                'cap_per_civ': None,
                'footprint_w': 1,
                'footprint_h': 1,
                'size': Decimal('0.6'),
                'global_modifiers': [],
                'flavor_text': 'Raw metal ore, waiting to be refined.',
                'image_path': '/media/objects/starter-ore.png'
            },
            {
                'object_name': 'Coal',
                'era_name': 'Metallurgy',
                'is_keystone': False,
                'category': 'natural',
                'quality_tier': 'common',
                'cost': Decimal('1000'),
                'time_crystal_cost': Decimal('0'),
                'income_per_second': Decimal('0'),
                'time_crystal_generation': Decimal('0'),
                'build_time_sec': 0,
                'operation_duration_sec': 300,
                'retire_payout_coins_pct': Decimal('0.2'),
                'sellback_pct': Decimal('0.2'),
                'cap_per_civ': None,
                'footprint_w': 1,
                'footprint_h': 1,
                'size': Decimal('0.5'),
                'global_modifiers': [],
                'flavor_text': 'Black fuel for intense heat.',
                'image_path': '/media/objects/starter-coal.png'
            },
            # Steam & Industry starters
            {
                'object_name': 'Iron',
                'era_name': 'Steam & Industry',
                'is_keystone': False,
                'category': 'natural',
                'quality_tier': 'common',
                'cost': Decimal('10000'),
                'time_crystal_cost': Decimal('0'),
                'income_per_second': Decimal('0'),
                'time_crystal_generation': Decimal('0'),
                'build_time_sec': 0,
                'operation_duration_sec': 300,
                'retire_payout_coins_pct': Decimal('0.2'),
                'sellback_pct': Decimal('0.2'),
                'cap_per_civ': None,
                'footprint_w': 1,
                'footprint_h': 1,
                'size': Decimal('0.7'),
                'global_modifiers': [],
                'flavor_text': 'Refined iron, backbone of industry.',
                'image_path': '/media/objects/starter-iron.png'
            },
            {
                'object_name': 'Steam',
                'era_name': 'Steam & Industry',
                'is_keystone': False,
                'category': 'power',
                'quality_tier': 'common',
                'cost': Decimal('10000'),
                'time_crystal_cost': Decimal('0'),
                'income_per_second': Decimal('0'),
                'time_crystal_generation': Decimal('0'),
                'build_time_sec': 0,
                'operation_duration_sec': 300,
                'retire_payout_coins_pct': Decimal('0.2'),
                'sellback_pct': Decimal('0.2'),
                'cap_per_civ': None,
                'footprint_w': 1,
                'footprint_h': 1,
                'size': Decimal('0.8'),
                'global_modifiers': [],
                'flavor_text': 'Harnessed water vapor, power of revolution.',
                'image_path': '/media/objects/starter-steam.png'
            },
            # Electric Age starters
            {
                'object_name': 'Copper',
                'era_name': 'Electric Age',
                'is_keystone': False,
                'category': 'natural',
                'quality_tier': 'common',
                'cost': Decimal('100000'),
                'time_crystal_cost': Decimal('0'),
                'income_per_second': Decimal('0'),
                'time_crystal_generation': Decimal('0'),
                'build_time_sec': 0,
                'operation_duration_sec': 300,
                'retire_payout_coins_pct': Decimal('0.2'),
                'sellback_pct': Decimal('0.2'),
                'cap_per_civ': None,
                'footprint_w': 1,
                'footprint_h': 1,
                'size': Decimal('0.5'),
                'global_modifiers': [],
                'flavor_text': 'Conductive metal for electrical systems.',
                'image_path': '/media/objects/starter-copper.png'
            },
            {
                'object_name': 'Magnet',
                'era_name': 'Electric Age',
                'is_keystone': False,
                'category': 'power',
                'quality_tier': 'common',
                'cost': Decimal('100000'),
                'time_crystal_cost': Decimal('0'),
                'income_per_second': Decimal('0'),
                'time_crystal_generation': Decimal('0'),
                'build_time_sec': 0,
                'operation_duration_sec': 300,
                'retire_payout_coins_pct': Decimal('0.2'),
                'sellback_pct': Decimal('0.2'),
                'cap_per_civ': None,
                'footprint_w': 1,
                'footprint_h': 1,
                'size': Decimal('0.4'),
                'global_modifiers': [],
                'flavor_text': 'Mysterious force that attracts and repels.',
                'image_path': '/media/objects/starter-magnet.png'
            },
            # Computing starters
            {
                'object_name': 'Silicon',
                'era_name': 'Computing',
                'is_keystone': False,
                'category': 'natural',
                'quality_tier': 'common',
                'cost': Decimal('500000'),
                'time_crystal_cost': Decimal('0'),
                'income_per_second': Decimal('0'),
                'time_crystal_generation': Decimal('0'),
                'build_time_sec': 0,
                'operation_duration_sec': 300,
                'retire_payout_coins_pct': Decimal('0.2'),
                'sellback_pct': Decimal('0.2'),
                'cap_per_civ': None,
                'footprint_w': 1,
                'footprint_h': 1,
                'size': Decimal('0.3'),
                'global_modifiers': [],
                'flavor_text': 'Foundation of the digital age.',
                'image_path': '/media/objects/starter-silicon.png'
            },
            {
                'object_name': 'Circuit',
                'era_name': 'Computing',
                'is_keystone': False,
                'category': 'power',
                'quality_tier': 'common',
                'cost': Decimal('500000'),
                'time_crystal_cost': Decimal('0'),
                'income_per_second': Decimal('0'),
                'time_crystal_generation': Decimal('0'),
                'build_time_sec': 0,
                'operation_duration_sec': 300,
                'retire_payout_coins_pct': Decimal('0.2'),
                'sellback_pct': Decimal('0.2'),
                'cap_per_civ': None,
                'footprint_w': 1,
                'footprint_h': 1,
                'size': Decimal('0.4'),
                'global_modifiers': [],
                'flavor_text': 'Electronic pathways for data flow.',
                'image_path': '/media/objects/starter-circuit.png'
            },
            # Futurism starters
            {
                'object_name': 'Polymer',
                'era_name': 'Futurism',
                'is_keystone': False,
                'category': 'natural',
                'quality_tier': 'common',
                'cost': Decimal('5000000'),
                'time_crystal_cost': Decimal('0'),
                'income_per_second': Decimal('0'),
                'time_crystal_generation': Decimal('0'),
                'build_time_sec': 0,
                'operation_duration_sec': 300,
                'retire_payout_coins_pct': Decimal('0.2'),
                'sellback_pct': Decimal('0.2'),
                'cap_per_civ': None,
                'footprint_w': 1,
                'footprint_h': 1,
                'size': Decimal('0.4'),
                'global_modifiers': [],
                'flavor_text': 'Advanced synthetic material.',
                'image_path': '/media/objects/starter-polymer.png'
            },
            {
                'object_name': 'Assembler',
                'era_name': 'Futurism',
                'is_keystone': False,
                'category': 'factory',
                'quality_tier': 'common',
                'cost': Decimal('5000000'),
                'time_crystal_cost': Decimal('0'),
                'income_per_second': Decimal('0'),
                'time_crystal_generation': Decimal('0'),
                'build_time_sec': 0,
                'operation_duration_sec': 300,
                'retire_payout_coins_pct': Decimal('0.2'),
                'sellback_pct': Decimal('0.2'),
                'cap_per_civ': None,
                'footprint_w': 1,
                'footprint_h': 1,
                'size': Decimal('1.0'),
                'global_modifiers': [],
                'flavor_text': 'Automated construction unit.',
                'image_path': '/media/objects/starter-assembler.png'
            },
            # Interstellar starters
            {
                'object_name': 'Fusion',
                'era_name': 'Interstellar',
                'is_keystone': False,
                'category': 'power',
                'quality_tier': 'common',
                'cost': Decimal('50000000'),
                'time_crystal_cost': Decimal('0'),
                'income_per_second': Decimal('0'),
                'time_crystal_generation': Decimal('0'),
                'build_time_sec': 0,
                'operation_duration_sec': 300,
                'retire_payout_coins_pct': Decimal('0.2'),
                'sellback_pct': Decimal('0.2'),
                'cap_per_civ': None,
                'footprint_w': 1,
                'footprint_h': 1,
                'size': Decimal('1.2'),
                'global_modifiers': [],
                'flavor_text': 'Star power contained.',
                'image_path': '/media/objects/starter-fusion.png'
            },
            {
                'object_name': 'Exotic Matter',
                'era_name': 'Interstellar',
                'is_keystone': False,
                'category': 'natural',
                'quality_tier': 'uncommon',
                'cost': Decimal('50000000'),
                'time_crystal_cost': Decimal('0'),
                'income_per_second': Decimal('0'),
                'time_crystal_generation': Decimal('0'),
                'build_time_sec': 0,
                'operation_duration_sec': 300,
                'retire_payout_coins_pct': Decimal('0.2'),
                'sellback_pct': Decimal('0.2'),
                'cap_per_civ': None,
                'footprint_w': 1,
                'footprint_h': 1,
                'size': Decimal('0.5'),
                'global_modifiers': [],
                'flavor_text': 'Strange substance from beyond our world.',
                'image_path': '/media/objects/starter-exotic.png'
            },
            # Arcana starters
            {
                'object_name': 'Crystal',
                'era_name': 'Arcana',
                'is_keystone': False,
                'category': 'natural',
                'quality_tier': 'rare',
                'cost': Decimal('500000000'),
                'time_crystal_cost': Decimal('0'),
                'income_per_second': Decimal('0'),
                'time_crystal_generation': Decimal('0'),
                'build_time_sec': 0,
                'operation_duration_sec': 300,
                'retire_payout_coins_pct': Decimal('0.2'),
                'sellback_pct': Decimal('0.2'),
                'cap_per_civ': None,
                'footprint_w': 1,
                'footprint_h': 1,
                'size': Decimal('0.6'),
                'global_modifiers': [],
                'flavor_text': 'Magical crystal resonating with power.',
                'image_path': '/media/objects/starter-crystal.png'
            },
            {
                'object_name': 'Ritual',
                'era_name': 'Arcana',
                'is_keystone': False,
                'category': 'magic',
                'quality_tier': 'rare',
                'cost': Decimal('500000000'),
                'time_crystal_cost': Decimal('0'),
                'income_per_second': Decimal('0'),
                'time_crystal_generation': Decimal('0'),
                'build_time_sec': 0,
                'operation_duration_sec': 300,
                'retire_payout_coins_pct': Decimal('0.2'),
                'sellback_pct': Decimal('0.2'),
                'cap_per_civ': None,
                'footprint_w': 1,
                'footprint_h': 1,
                'size': Decimal('1.0'),
                'global_modifiers': [],
                'flavor_text': 'Ancient ceremony channeling mystic forces.',
                'image_path': '/media/objects/starter-ritual.png'
            },
            # Beyond starters
            {
                'object_name': 'Quantum Core',
                'era_name': 'Beyond',
                'is_keystone': False,
                'category': 'power',
                'quality_tier': 'epic',
                'cost': Decimal('5000000000'),
                'time_crystal_cost': Decimal('0'),
                'income_per_second': Decimal('0'),
                'time_crystal_generation': Decimal('0'),
                'build_time_sec': 0,
                'operation_duration_sec': 300,
                'retire_payout_coins_pct': Decimal('0.2'),
                'sellback_pct': Decimal('0.2'),
                'cap_per_civ': None,
                'footprint_w': 1,
                'footprint_h': 1,
                'size': Decimal('1.5'),
                'global_modifiers': [],
                'flavor_text': 'Computing beyond comprehension.',
                'image_path': '/media/objects/starter-quantum.png'
            },
            {
                'object_name': 'Archive',
                'era_name': 'Beyond',
                'is_keystone': False,
                'category': 'research',
                'quality_tier': 'epic',
                'cost': Decimal('5000000000'),
                'time_crystal_cost': Decimal('0'),
                'income_per_second': Decimal('0'),
                'time_crystal_generation': Decimal('0'),
                'build_time_sec': 0,
                'operation_duration_sec': 300,
                'retire_payout_coins_pct': Decimal('0.2'),
                'sellback_pct': Decimal('0.2'),
                'cap_per_civ': None,
                'footprint_w': 1,
                'footprint_h': 1,
                'size': Decimal('1.2'),
                'global_modifiers': [],
                'flavor_text': 'Repository of all knowledge ever recorded.',
                'image_path': '/media/objects/starter-archive.png'
            }
        ]

        for obj_data in starter_objects:
            obj, created = GameObject.objects.get_or_create(
                object_name=obj_data['object_name'],
                defaults=obj_data
            )
            if created:
                self.stdout.write(self.style.SUCCESS(f'Created {obj.object_name}'))
            else:
                self.stdout.write(self.style.WARNING(f'{obj.object_name} already exists'))

        self.stdout.write(self.style.SUCCESS('Starter objects initialized!'))
